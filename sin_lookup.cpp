#include "sin_lookup.hpp"
#include <array>

std::pair<uint16_t, bool> sin_lookup(unsigned x) {
  static const std::array<uint16_t, 65> sin_data = {
    0,      1608,   3216,   4821,   6424,   8022,   9616,   11204,
    12785,  14359,  15924,  17479,  19024,  20557,  22078,  23586,
    25079,  26557,  28020,  29465,  30893,  32302,  33692,  35061,
    36409,  37736,  39039,  40319,  41575,  42806,  44011,  45189,
    46340,  47464,  48558,  49624,  50659,  51664,  52638,  53580,
    54490,  55367,  56211,  57021,  57797,  58537,  59243,  59913,
    60546,  61144,  61704,  62227,  62713,  63161,  63571,  63943,
    64276,  64570,  64826,  65042,  65219,  65357,  65456,  65515,
    65535,
  };

  bool neg = x & 128;
  x = x & 127;
  if (x <= 64)
    return std::make_pair(sin_data[x], neg);
  else
    return std::make_pair(sin_data[128-x], neg);
} 
